(function(){"use strict";const io=["selfBuffs","groupBuffs","squadBuffs"],to=n=>n!=null&&n.classification?n.classification==="Boon":!0,ao=n=>`b${n}`,ko=(n,e)=>{const s=Array.isArray(n==null?void 0:n.activeTimes)?n.activeTimes:[],c=typeof s[0]=="number"?s[0]:0;return c>0?c:e},ro=(n,e,s,c,u,a,b)=>{const g=n==="selfBuffs"?1:Math.max(n==="groupBuffs"?a-1:b-1,0);return!g||!u?{generationMs:0,wastedMs:0}:e?{generationMs:s*u*g,wastedMs:c*u*g}:{generationMs:s/100*u*g,wastedMs:c/100*u*g}},Mo=n=>{const e=new Map,s=new Map;return n.forEach(a=>{const b=a.details;if(!b)return;const g=b.durationMS||0,d=b.buffMap||{};Object.entries(d).forEach(([r,p])=>{if(!e.has(r)){e.set(r,p);return}const i=e.get(r)||{},v={name:i.name||p.name,stacking:i.stacking??p.stacking,icon:i.icon||p.icon,classification:i.classification||p.classification};e.set(r,v)});const N=(b.players||[]).filter(r=>!r.notInSquad),x=N.length,l=new Map;N.forEach(r=>{const p=r.group??0;l.set(p,(l.get(p)||0)+1)}),N.forEach(r=>{const p=r.account||r.name||r.character_name||"Unknown",i=r.profession||"Unknown",v=r.group??0,T=l.get(v)||1,H=ko(r,g);s.has(p)||s.set(p,{account:p,profession:i,professions:new Set,professionTimeMs:{},activeTimeMs:0,numFights:0,groupSupported:0,squadSupported:0,boons:{}});const M=s.get(p);M.profession=i,i!=="Unknown"&&(M.professions.add(i),M.professionTimeMs[i]=(M.professionTimeMs[i]||0)+H),M.activeTimeMs+=H,M.numFights+=1,M.groupSupported+=T,M.squadSupported+=x,io.forEach(B=>{(r[B]||[]).forEach(D=>{var $,j,I,Y;if(typeof(D==null?void 0:D.id)!="number")return;const k=ao(D.id),L=d[k];if(!to(L))return;const y=(L==null?void 0:L.stacking)??!1,O=((j=($=D.buffData)==null?void 0:$[0])==null?void 0:j.generation)??0,J=((Y=(I=D.buffData)==null?void 0:I[0])==null?void 0:Y.wasted)??0,{generationMs:z,wastedMs:G}=ro(B,y,O,J,g,T,x);!z&&!G||(e.has(k)||e.set(k,L||{}),M.boons[k]||(M.boons[k]={selfBuffs:{generationMs:0,wastedMs:0},groupBuffs:{generationMs:0,wastedMs:0},squadBuffs:{generationMs:0,wastedMs:0}}),M.boons[k][B].generationMs+=z,M.boons[k][B].wastedMs+=G)})})})}),{boonTables:Array.from(e.keys()).filter(a=>to(e.get(a))).map(a=>{const b=e.get(a)||{},g=[];return s.forEach(d=>{var r;const w=d.boons[a];if(!w||!io.some(p=>w[p].generationMs>0||w[p].wastedMs>0))return;const x=Array.from(d.professions||[]).filter(p=>p&&p!=="Unknown");let l=d.profession;if(x.length>0){l=x[0];let p=((r=d.professionTimeMs)==null?void 0:r[l])||0;x.forEach(i=>{var T;const v=((T=d.professionTimeMs)==null?void 0:T[i])||0;v>p&&(p=v,l=i)})}g.push({account:d.account,profession:l||"Unknown",professionList:x,activeTimeMs:d.activeTimeMs||1,numFights:d.numFights||1,groupSupported:d.groupSupported||1,squadSupported:d.squadSupported||1,categories:{selfBuffs:{...w.selfBuffs},groupBuffs:{...w.groupBuffs},squadBuffs:{...w.squadBuffs}}})}),{id:a,name:b.name||a,stacking:b.stacking??!1,rows:g}}).filter(a=>a.rows.length>0)}},co=(n,e,s,c,u,a,b={})=>{var r,p,i,v;const d=((n==null?void 0:n[e])||[]).find(T=>T.id===s);if(!d)return{generationMs:0,wastedMs:0};const w=b[ao(s)],N=(w==null?void 0:w.stacking)??!1,x=((p=(r=d.buffData)==null?void 0:r[0])==null?void 0:p.generation)??0,l=((v=(i=d.buffData)==null?void 0:i[0])==null?void 0:v.wasted)??0;return ro(e,N,x,l,c,u,a)};var Do={methods:{tiered:{tiers:{shortMs:500,mediumMs:1500,weights:{short:.5,medium:1,long:2}}}}};const Fo=Do,so="count",To=n=>(n||0)/1e3,Bo=(n,e)=>{var u;if(!n)return 0;const s=(u=Fo.methods.tiered)==null?void 0:u.tiers;if(!s)return n;const c=e/Math.max(n,1);return c<=s.shortMs?n*s.weights.short:c<=s.mediumMs?n*s.weights.medium:n*s.weights.long},uo=(n,e,s)=>s==="duration"?To(e):s==="tiered"?Bo(n,e):n;function Eo(n,e=so){var a;const s=(a=n.statsAll)==null?void 0:a[0],c=Number((s==null?void 0:s.appliedCrowdControl)??0),u=Number((s==null?void 0:s.appliedCrowdControlDuration)??0);return uo(c,u,e)}function Ao(n,e){const c={},u=n.filter(g=>!g.notInSquad),a=u.length,b=new Map;u.forEach(g=>{const d=g.group??0;b.set(d,(b.get(d)||0)+1)}),u.forEach(g=>{const d=b.get(g.group??0)||1,w=co(g,"selfBuffs",1122,0,d,a,c),N=co(g,"squadBuffs",1122,0,d,a,c);g.stabGeneration=(w.generationMs+N.generationMs)/1e3})}function Lo(n){if(!n.statsTargets)return 0;let e=0;for(const s of n.statsTargets)s&&s.length>0&&(e+=s[0].downContribution||0);return e}function Po(n){if(!n.extBarrierStats||!n.extBarrierStats.outgoingBarrierAllies)return 0;let e=0;for(const s of n.extBarrierStats.outgoingBarrierAllies)if(s)for(const c of s)c&&(e+=c.barrier||0);return e}function xo(n){if(!n.extHealingStats||!n.extHealingStats.outgoingHealingAllies)return 0;let e=0;for(const s of n.extHealingStats.outgoingHealingAllies)if(s)for(const c of s)c&&(e+=c.healing||0);return e}const Uo=n=>{var e,s,c,u;return(((s=(e=n.support)==null?void 0:e[0])==null?void 0:s.condiCleanse)||0)+(((u=(c=n.support)==null?void 0:c[0])==null?void 0:u.condiCleanseSelf)||0)},qo=(n,e=so)=>{var a;const s=(a=n.support)==null?void 0:a[0],c=Number((s==null?void 0:s.boonStrips)??0),u=Number((s==null?void 0:s.boonStripsTime)??0);return uo(c,u,e)},No=n=>Lo(n),Ro=n=>xo(n),yo=n=>Po(n),Oo=(n,e=so)=>Eo(n,e),Io=(n,e)=>Ao(n),lo={Guardian:"#72C1D9",Dragonhunter:"#72C1D9",Firebrand:"#72C1D9",Willbender:"#72C1D9",Revenant:"#D16E5A",Herald:"#D16E5A",Renegade:"#D16E5A",Vindicator:"#D16E5A",Warrior:"#FFD166",Berserker:"#FFD166",Spellbreaker:"#FFD166",Bladesworn:"#FFD166",Engineer:"#D09C59",Scrapper:"#D09C59",Holosmith:"#D09C59",Mechanist:"#D09C59",Ranger:"#8CDC82",Druid:"#8CDC82",Soulbeast:"#8CDC82",Untamed:"#8CDC82",Thief:"#C08F95",Daredevil:"#C08F95",Deadeye:"#C08F95",Specter:"#C08F95",Elementalist:"#F68A87",Tempest:"#F68A87",Weaver:"#F68A87",Catalyst:"#F68A87",Mesmer:"#B679D5",Chronomancer:"#B679D5",Mirage:"#B679D5",Virtuoso:"#B679D5",Necromancer:"#52A76F",Reaper:"#52A76F",Scourge:"#52A76F",Harbinger:"#52A76F",Ritualist:"#52A76F",Luminary:"#72C1D9",Conduit:"#D16E5A",Paragon:"#FFD166",Amalgam:"#D09C59",Galeshot:"#8CDC82",Antiquary:"#C08F95",Evoker:"#F68A87",Troubadour:"#B679D5",Unknown:"#64748B"};function Ho(n){return lo[n]||lo.Unknown}const Jo=new Map([["bleeding","Bleeding"],["burning","Burning"],["confusion","Confusion"],["poison","Poison"],["torment","Torment"],["vulnerability","Vulnerability"],["weakness","Weakness"],["blind","Blind"],["crippled","Cripple"],["chilled","Chill"],["immobilized","Immobilize"],["slow","Slow"],["fear","Fear"],["taunt","Taunt"]]),eo=n=>{if(!n)return null;const e=n.trim().toLowerCase();return Jo.get(e)||null},$o=(n,e,s)=>{var c;if(e&&s){const u=(c=s[`b${e}`])==null?void 0:c.name,a=eo(u);if(a)return a}return n?eo(n):null},Ko=n=>{const e=(n==null?void 0:n.account)||"Unknown";return e&&e!=="Unknown"?e:(n==null?void 0:n.name)||"Unknown"||null},zo=n=>{if(!n||n.length===0)return 0;let e=0,s=0;return n.forEach(c=>{const u=Number(c[0]??0),a=Number(c[1]??0);if(!(!Number.isFinite(u)||!Number.isFinite(a))){if(u===0){s=a;return}s===0&&a>0&&(e+=1),s=a}}),e},Go=n=>{const{players:e,targets:s,skillMap:c,buffMap:u}=n,a=n.getPlayerKey||Ko,b={},g={};e.forEach(l=>{if(l!=null&&l.notInSquad)return;const r=a(l);r&&(b[r]||(b[r]={}),l!=null&&l.totalDamageDist&&l.totalDamageDist.forEach(p=>{p&&p.forEach(i=>{var J;if(!i.id)return;let v=`Skill ${i.id}`;c&&(c[`s${i.id}`]?v=c[`s${i.id}`].name||v:c[`${i.id}`]&&(v=c[`${i.id}`].name||v));const T=$o(v,i.id,u);if(!T)return;const H=(J=u==null?void 0:u[`b${i.id}`])==null?void 0:J.name,M=v.startsWith("Skill ")&&H?H:v,B=Number(i.connectedHits??0),R=Number(i.hits??0),D=B>0?B:R,k=Number(i.totalDamage??0);if(!Number.isFinite(D)&&!Number.isFinite(k))return;const L=g[T]||{name:T,applications:0,damage:0};L.applications+=Number.isFinite(D)?D:0,L.damage+=Number.isFinite(k)?k:0,g[T]=L;const y=b[r][T]||{applications:0,damage:0,skills:{}};y.applications+=Number.isFinite(D)?D:0,y.damage+=Number.isFinite(k)?k:0;const O=y.skills[M]||{name:M,hits:0,damage:0};O.hits+=Number.isFinite(D)?D:0,O.damage+=Number.isFinite(k)?k:0,y.skills[M]=O,b[r][T]=y})}))});const d=new Map;e.forEach(l=>{if(l!=null&&l.notInSquad)return;const r=a(l);r&&l!=null&&l.name&&d.set(l.name,r)});let w=0,N=0,x=0;return s.forEach(l=>{l!=null&&l.buffs&&l.buffs.forEach(r=>{const p=Number(r==null?void 0:r.id);if(!Number.isFinite(p))return;const i=u==null?void 0:u[`b${p}`];if((i==null?void 0:i.classification)!=="Condition")return;const v=(i==null?void 0:i.name)||eo(i==null?void 0:i.name);if(!v)return;const T=r.statesPerSource||{};x+=1,Object.entries(T).forEach(([H,M])=>{var L;const B=d.get(H);if(!B)return;N+=1;const R=zo(M);if(!R)return;w+=R;const D=((L=b[B])==null?void 0:L[v])||{applications:0,damage:0,skills:{}};D.applicationsFromBuffs=(D.applicationsFromBuffs||0)+R,b[B]=b[B]||{},b[B][v]=D;const k=g[v]||{name:v,applications:0,damage:0};k.applicationsFromBuffs=(k.applicationsFromBuffs||0)+R,g[v]=k})})}),{playerConditions:b,summary:g,meta:{buffStateApplicationsTotal:w,targetBuffEntriesSeen:x,buffStateSourcesSeen:N}}},fo=self,V=n=>{fo.postMessage(n)},Wo=(n,e,s)=>{V({type:"PROGRESS",id:n,percent:e,stage:s})},_o=(n,e,s,c)=>{const u=n.filter(o=>o.details&&!o.error),a=u.length;if(a===0)return jo();let b=0,g=0;const d=new Map,w={};let N=0,x=0,l=0,r=0,p=0,i=0;const v={};u.forEach((o,t)=>{const C=o.details;if(!C)return;const f=C.players,U=C.targets||[],E=o.eiDetails||C,q=(E==null?void 0:E.players)||f,W=(E==null?void 0:E.targets)||U,Q=(E==null?void 0:E.skillMap)||C.skillMap,X=(E==null?void 0:E.buffMap)||C.buffMap,S=C.combatReplayMetaData||{};typeof(S==null?void 0:S.inchToPixel)=="number"&&S.inchToPixel>0&&S.inchToPixel,typeof(S==null?void 0:S.pollingRate)=="number"&&S.pollingRate>0&&S.pollingRate,C.durationMS;const _=typeof C.fightName=="string"?C.fightName:"Unknown";v[_]=(v[_]||0)+1;const Z=f.filter(m=>!m.notInSquad),oo=U.filter(m=>!m.isFake);if(N+=Z.length,x+=oo.length,C.success===!0?b++:g++,f.forEach(m=>{var bo,vo,Co,So;if(m.notInSquad)return;const F=m.account||"Unknown",A=m.profession||"Unknown",P=C.durationMS||0;let h=d.get(F);h||(h={name:m.name||F,account:F,downContrib:0,cleanses:0,strips:0,stab:0,healing:0,barrier:0,cc:0,logsJoined:0,totalDist:0,distCount:0,dodges:0,downs:0,deaths:0,totalFightMs:0,offenseTotals:{},offenseRateWeights:{},defenseActiveMs:0,defenseTotals:{},supportActiveMs:0,supportTotals:{},healingActiveMs:0,healingTotals:{},profession:A,professions:new Set,professionTimeMs:{},isCommander:!1,damage:0,dps:0,revives:0,outgoingConditions:{},incomingConditions:{}},d.set(F,h)),h.logsJoined++,h.totalFightMs+=P,h.professions.add(A),h.professionTimeMs[A]=(h.professionTimeMs[A]||0)+P,m.hasCommanderTag&&(h.isCommander=!0),h.cleanses+=Uo(m),h.strips+=qo(m),h.downContrib+=No(m),h.healing+=Ro(m),h.barrier+=yo(m),h.cc+=Oo(m,U),h.stab+=Io(m);const K=((bo=m.defenses)==null?void 0:bo[0])||{};h.dodges+=Number(K.dodgeCount||0),h.deaths+=Number(K.deadCount||0),h.downs+=Number(K.downCount||0);const rn=((vo=m.dpsAll)==null?void 0:vo[0])||{};h.damage+=Number(rn.damage||0);const cn=((Co=m.support)==null?void 0:Co[0])||{};h.revives+=Number(cn.resurrects||0);const no=(((So=m.statsAll)==null?void 0:So[0])||{}).distToCom;if(no!=null&&no!=="Infinity"){const wo=Number(no);Number.isFinite(wo)&&(h.totalDist+=wo,h.distCount++)}}),q&&W)try{const m=Go({players:q,targets:W,skillMap:Q,buffMap:X});Object.entries(m.playerConditions).forEach(([F,A])=>{const P=d.get(F);P&&Object.entries(A).forEach(([h,K])=>{P.outgoingConditions[h]||(P.outgoingConditions[h]={applications:0,damage:0,skills:{}}),P.outgoingConditions[h].applications+=K.applications,P.outgoingConditions[h].damage+=K.damage,K.applicationsFromBuffs&&(P.outgoingConditions[h].applicationsFromBuffs=(P.outgoingConditions[h].applicationsFromBuffs||0)+K.applicationsFromBuffs)})}),Object.entries(m.summary).forEach(([F,A])=>{w[F]||(w[F]={name:F,applications:0,damage:0}),w[F].applications+=A.applications,w[F].damage+=A.damage,A.applicationsFromBuffs&&(w[F].applicationsFromBuffs=(w[F].applicationsFromBuffs||0)+A.applicationsFromBuffs)})}catch(m){console.warn("[StatsWorker] Condition computation failed:",m)}oo.forEach(m=>{var A,P;(m.healthPercentBurned>=100||((P=(A=m.defenses)==null?void 0:A[0])==null?void 0:P.deadCount)>0)&&(r++,p++)}),Z.forEach(m=>{var A,P;const F=((P=(A=m.defenses)==null?void 0:A[0])==null?void 0:P.deadCount)||0;l+=F,i+=F})});const T=a>0?Math.round(N/a):0,H=a>0?Math.round(x/a):0;d.forEach(o=>{o.totalFightMs>0&&(o.dps=Math.round(o.damage/(o.totalFightMs/1e3)));let t=0;o.professions.forEach(C=>{const f=o.professionTimeMs[C]||0;f>t&&(t=f,o.profession=C)}),o.professionList=Array.from(o.professions)});let M={value:0,player:"",count:0,profession:"Unknown",professionList:[]},B={value:0,player:"",count:0,profession:"Unknown",professionList:[]},R={value:0,player:"",count:0,profession:"Unknown",professionList:[]},D={value:0,player:"",count:0,profession:"Unknown",professionList:[]},k={value:0,player:"",count:0,profession:"Unknown",professionList:[]},L={value:0,player:"",count:0,profession:"Unknown",professionList:[]},y={value:0,player:"",count:0,profession:"Unknown",professionList:[]},O={value:0,player:"",count:0,profession:"Unknown",professionList:[]},J={value:0,player:"",count:0,profession:"Unknown",professionList:[]},z={value:0,player:"",count:0,profession:"Unknown",professionList:[]},G={value:0,player:"",count:0,profession:"Unknown",professionList:[]},$={value:999999,player:"",count:0,profession:"Unknown",professionList:[]},j=0;const I=Array.from(d.entries()).map(([o,t])=>({key:o,stat:t}));I.forEach(({stat:o})=>{const t={player:o.account,count:o.logsJoined,profession:o.profession,professionList:o.professionList||[]};if(o.downContrib>M.value&&(M={value:o.downContrib,...t}),o.cleanses>B.value&&(B={value:o.cleanses,...t}),o.strips>R.value&&(R={value:o.strips,...t}),o.stab>D.value&&(D={value:o.stab,...t}),o.healing>k.value&&(k={value:o.healing,...t}),o.barrier>L.value&&(L={value:o.barrier,...t}),o.cc>y.value&&(y={value:o.cc,...t}),o.dodges>O.value&&(O={value:o.dodges,...t}),o.damage>J.value&&(J={value:o.damage,...t}),o.dps>z.value&&(z={value:o.dps,...t}),o.revives>G.value&&(G={value:o.revives,...t}),o.logsJoined>j&&(j=o.logsJoined),!o.isCommander&&o.distCount>0){const C=o.totalDist/o.distCount;C>0&&C<$.value&&($={value:C,...t})}}),$.value===999999&&($.value=0);let Y=null,po=null,mo=null,go=0;const Vo={};if(s.showMvp&&d.size>0){const o=e,t=[];let C=0;if(I.forEach(({stat:f})=>{var X;let U=0;const E=[],q=(S,_,Z,oo,an)=>{if(_<=0||!Number.isFinite(S))return;const m=S/_,F=m*oo;U+=F,E.push({name:Z,ratio:m,fmt:`${Math.round(S)}`,rank:0})};q(f.downContrib,M.value,"Down Contribution",o.downContribution),q(f.cleanses,B.value,"Cleanses",o.cleanses),q(f.strips,R.value,"Strips",o.strips),q(f.stab,D.value,"Stability",o.stability),q(f.healing,k.value,"Healing",o.healing),q(f.barrier,L.value,"Barrier",o.healing),q(f.cc,y.value,"CC",o.cc),q(f.revives,G.value,"Revives",o.revives),q(f.logsJoined,j,"Participation",o.participation),q(f.dodges,O.value,"Dodging",o.dodging),q(f.dps,z.value,"DPS",o.dps),q(f.damage,J.value,"Damage",o.damage),C+=U,E.sort((S,_)=>_.ratio-S.ratio);const W=E.slice(0,3);let Q="Consistent all-round performance";if(W.length>0){const S=W[0];S.ratio>=1?Q=`Top Rank in ${S.name}`:S.ratio>.8&&(Q=`High ${S.name} & ${((X=W[1])==null?void 0:X.name)||"Performance"}`)}t.push({player:f.name,account:f.account,profession:f.profession,professionList:f.professionList,score:U,reason:Q,topStats:W.map(S=>({name:S.name,val:S.fmt,ratio:S.rank}))})}),t.sort((f,U)=>U.score-f.score),po=t[1],mo=t[2],t[0]){const f=t[0];Y={player:f.player,account:f.account,reason:f.reason,score:f.score,profession:f.profession,professionList:f.professionList||[],color:Ho(f.profession),topStats:f.topStats}}go=d.size>0?C/d.size:0}const Yo=I.map(({stat:o})=>({account:o.account,profession:o.profession,professionList:o.professionList,damage:o.damage,dps:o.dps,logsJoined:o.logsJoined})).sort((o,t)=>t.damage-o.damage),Qo=I.map(({stat:o})=>({account:o.account,profession:o.profession,professionList:o.professionList,dodges:o.dodges,downs:o.downs,deaths:o.deaths,logsJoined:o.logsJoined})).sort((o,t)=>o.deaths-t.deaths),Xo=I.map(({stat:o})=>({account:o.account,profession:o.profession,professionList:o.professionList,cleanses:o.cleanses,strips:o.strips,revives:o.revives,logsJoined:o.logsJoined})).sort((o,t)=>t.cleanses+t.strips-(o.cleanses+o.strips)),Zo=I.map(({stat:o})=>({account:o.account,profession:o.profession,professionList:o.professionList,healing:o.healing,barrier:o.barrier,logsJoined:o.logsJoined})).sort((o,t)=>t.healing+t.barrier-(o.healing+o.barrier)),on=Object.values(w).map(o=>({...o,applications:o.applicationsFromBuffs&&o.applicationsFromBuffs>0?o.applicationsFromBuffs:o.applications})).sort((o,t)=>t.damage-o.damage),nn=I.map(({stat:o})=>{const t=o.outgoingConditions||{};let C=0,f=0;return Object.values(t).forEach(U=>{const E=U.applicationsFromBuffs&&U.applicationsFromBuffs>0?U.applicationsFromBuffs:U.applications;C+=Number(E||0),f+=Number(U.damage||0)}),{account:o.account,profession:o.profession,professionList:o.professionList,totalFightMs:o.totalFightMs||0,totalApplications:C,totalDamage:f,conditions:t}}),sn=l>0?(r/l).toFixed(2):r>0?"∞":"0.00",en=p>0?(i/p).toFixed(2):i>0?"∞":"0.00",tn=Object.entries(v).map(([o,t])=>({name:o,value:t})).sort((o,t)=>t.value-o.value);let ho=[];try{ho=Mo(u)||[]}catch(o){console.warn("[StatsWorker] Boon table computation failed:",o)}return{total:a,wins:b,losses:g,avgSquadSize:T,avgEnemies:H,squadKDR:sn,enemyKDR:en,totalSquadKills:r,totalSquadDeaths:l,totalEnemyKills:i,totalEnemyDeaths:p,maxDownContrib:M,maxCleanses:B,maxStrips:R,maxStab:D,maxHealing:k,maxBarrier:L,maxCC:y,closestToTag:$,maxDodges:O,maxDamage:J,maxDps:z,maxRevives:G,topSkills:[],topIncomingSkills:[],outgoingConditionSummary:on,outgoingConditionPlayers:nn,incomingConditionSummary:[],incomingConditionPlayers:[],mapData:tn,squadClassData:[],enemyClassData:[],timelineData:[],fightBreakdown:[],boonTables:ho,specialTables:[],offensePlayers:Yo,defensePlayers:Qo,supportPlayers:Xo,healingPlayers:Zo,mvp:Y,silver:po,bronze:mo,avgMvpScore:go,leaderboards:Vo}},jo=()=>({total:0,wins:0,losses:0,avgSquadSize:0,avgEnemies:0,squadKDR:"0.00",enemyKDR:"0.00",totalSquadKills:0,totalSquadDeaths:0,totalEnemyKills:0,totalEnemyDeaths:0,maxDownContrib:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxCleanses:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxStrips:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxStab:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxHealing:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxBarrier:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxCC:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},closestToTag:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxDodges:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxDamage:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxDps:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},maxRevives:{value:0,player:"",count:0,profession:"Unknown",professionList:[]},topSkills:[],topIncomingSkills:[],outgoingConditionSummary:[],outgoingConditionPlayers:[],incomingConditionSummary:[],incomingConditionPlayers:[],mapData:[],squadClassData:[],enemyClassData:[],timelineData:[],fightBreakdown:[],boonTables:[],specialTables:[],offensePlayers:[],defensePlayers:[],supportPlayers:[],healingPlayers:[],mvp:null,silver:null,bronze:null,avgMvpScore:0,leaderboards:{}});fo.onmessage=n=>{const e=n.data;switch(e.type){case"COMPUTE_STATS":{try{Wo(e.id,10,"Starting computation...");const s=_o(e.input.logs,e.input.mvpWeights,e.input.statsViewSettings,e.input.disruptionMethod);V({type:"STATS_RESULT",id:e.id,stats:s})}catch(s){V({type:"ERROR",id:e.id,error:(s==null?void 0:s.message)||String(s)})}break}case"CANCEL":break;default:V({type:"ERROR",id:e.id||"unknown",error:`Unknown request type: ${e.type}`})}},V({type:"READY"})})();
